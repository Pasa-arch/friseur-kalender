<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const sb = supabase.createClient(
  "https://vsswsckjvfeglbtealdg.supabase.co",
  "DEIN_ANON_KEY_HIER"
);

const list = document.querySelector("tbody");

async function loadEvents() {
  const { data, error } = await sb
    .from("events")
    .select("*")
    .order("start_time");

  if (error) {
    alert(error.message);
    return;
  }

  list.innerHTML = "";
  data.forEach(e => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${e.staff}</td>
      <td>${e.customer || "-"}</td>
      <td>${e.title}</td>
      <td>${new Date(e.start_time).toLocaleString()}</td>
      <td>${new Date(e.end_time).toLocaleString()}</td>
      <td>
        <button onclick="del('${e.id}')">ðŸ—‘</button>
      </td>
    `;
    list.appendChild(tr);
  });
}

async function del(id) {
  await sb.from("events").delete().eq("id", id);
  loadEvents();
}

loadEvents();
</script>
